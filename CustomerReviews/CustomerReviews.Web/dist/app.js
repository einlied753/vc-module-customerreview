!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),r(2),r(3),e.exports=r(4)},function(e,t){void 0!==AppDependencies&&AppDependencies.push("CustomerReviews"),angular.module("CustomerReviews",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("workspace.customerReviews",{url:"/customerReviews",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"reviewsList",controller:"CustomerReviews.reviewsListController",template:"Modules/$(CustomerReviews)/Scripts/blades/reviews-list.tpl.html",isClosingDisabled:!0})}]})}]).run(["platformWebApp.mainMenuService","platformWebApp.widgetService","$state",function(e,t,r){var o={path:"browse/customerReviews",icon:"fa fa-comments",title:"Customer Reviews",priority:100,action:function(){r.go("workspace.customerReviews")},permission:"customerReview:read"};e.addMenuItem(o);t.registerWidget({controller:"CustomerReviews.customerReviewWidgetController",template:"Modules/$(CustomerReviews)/Scripts/widgets/customerReviewWidget.tpl.html"},"itemDetail")}])},function(e,t){angular.module("CustomerReviews").controller("CustomerReviews.reviewsListController",["$scope","CustomerReviews.api","platformWebApp.bladeUtils","uiGridConstants","platformWebApp.uiGridHelper",function(e,t,r,o,i){e.uiGridConstants=o;var n=e.blade;r.bladeNavigationService;n.getSearchCriteria=function(){return angular.extend(s,{searchPhrase:s.keyword?s.keyword:void 0,sort:i.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount})},n.refresh=function(){n.isLoading=!0,t.search(n.getSearchCriteria(),(function(t){n.isLoading=!1,e.pageSettings.totalItems=t.totalCount,n.currentEntities=t.results}))},n.selectNode=function(e){},n.headIcon="fa-comments",n.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:n.refresh,canExecuteMethod:function(){return!0}}];var s=e.filter=n.filter||{};s.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:n.refresh()},e.setGridOptions=function(t){i.initialize(e,t,(function(t){i.bindRefreshOnSortChanged(e)})),r.initializePagination(e.$parent)}}])},function(e,t){angular.module("CustomerReviews").factory("CustomerReviews.api",["$resource",function(e){return e("api/customerReviews",{},{search:{method:"POST",url:"api/customerReviews/search"},update:{method:"POST",url:"api/customerReviews/update"},delete:{method:"DELETE",url:"api/customerReviews/delete"}})}])},function(e,t){angular.module("CustomerReviews").controller("CustomerReviews.customerReviewWidgetController",["$scope","CustomerReviews.api","platformWebApp.bladeNavigationService",function(e,t,r){var o=e.blade,i={take:0};e.openBlade=function(){if(!e.loading&&e.totalCount){var t={id:"reviewsList",filter:i,title:'Customer reviews for "'+o.title+'"',controller:"CustomerReviews.reviewsListController",template:"Modules/$(CustomerReviews)/Scripts/blades/reviews-list.tpl.html"};r.showBlade(t,o)}},e.$watch("blade.itemId",(function(r){i.productIds=[r],r&&(e.loading=!0,t.search(i,(function(t){e.loading=!1,e.totalCount=t.totalCount})))}))}])}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9DdXN0b21lclJldmlld3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy9tb2R1bGUuanMuanMiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy9ibGFkZXMvcmV2aWV3cy1saXN0LmpzIiwid2VicGFjazovL0N1c3RvbWVyUmV2aWV3cy8uL1NjcmlwdHMvcmVzb3VyY2VzL0N1c3RvbWVyUmV2aWV3cy5XZWJBcGkuanMiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy93aWRnZXRzL2N1c3RvbWVyUmV2aWV3V2lkZ2V0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidW5kZWZpbmVkIiwiQXBwRGVwZW5kZW5jaWVzIiwicHVzaCIsImFuZ3VsYXIiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiYmxhZGVOYXZpZ2F0aW9uU2VydmljZSIsInNob3dCbGFkZSIsImlkIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsInJ1biIsIm1haW5NZW51U2VydmljZSIsIndpZGdldFNlcnZpY2UiLCIkc3RhdGUiLCJtZW51SXRlbSIsInBhdGgiLCJpY29uIiwidGl0bGUiLCJwcmlvcml0eSIsImFjdGlvbiIsImdvIiwicGVybWlzc2lvbiIsImFkZE1lbnVJdGVtIiwicmVnaXN0ZXJXaWRnZXQiLCJyZXZpZXdzQXBpIiwiYmxhZGVVdGlscyIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZEhlbHBlciIsImJsYWRlIiwiZ2V0U2VhcmNoQ3JpdGVyaWEiLCJleHRlbmQiLCJmaWx0ZXIiLCJzZWFyY2hQaHJhc2UiLCJrZXl3b3JkIiwic29ydCIsImdldFNvcnRFeHByZXNzaW9uIiwic2tpcCIsInBhZ2VTZXR0aW5ncyIsImN1cnJlbnRQYWdlIiwiaXRlbXNQZXJQYWdlQ291bnQiLCJ0YWtlIiwicmVmcmVzaCIsImlzTG9hZGluZyIsInNlYXJjaCIsImRhdGEiLCJ0b3RhbEl0ZW1zIiwidG90YWxDb3VudCIsImN1cnJlbnRFbnRpdGllcyIsInJlc3VsdHMiLCJzZWxlY3ROb2RlIiwiaGVhZEljb24iLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwiY2FuRXhlY3V0ZU1ldGhvZCIsImNyaXRlcmlhQ2hhbmdlZCIsInNldEdyaWRPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJpbml0aWFsaXplIiwiZ3JpZEFwaSIsImJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiJHBhcmVudCIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCJtZXRob2QiLCJ1cGRhdGUiLCJkZWxldGUiLCJvcGVuQmxhZGUiLCJsb2FkaW5nIiwibmV3QmxhZGUiLCIkd2F0Y2giLCJwcm9kdWN0SWRzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNI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LE9BQU8sbUJBQ1gyQyxXQUFXLGlEQUFrRCxDQUFDLFNBQVUsc0JBQXVCLHdDQUF5QyxTQUFVQyxFQUFRb0IsRUFBWW5CLEdBQ25LLElBQUl1QixFQUFReEIsRUFBT3dCLE1BQ2ZHLEVBQVMsQ0FBRVMsS0FBTSxHQVVyQnBDLEVBQU8rRCxVQUFZLFdBQ2YsSUFBSS9ELEVBQU9nRSxTQUFZaEUsRUFBTzBDLFdBQTlCLENBR0EsSUFBSXVCLEVBQVcsQ0FDWDlELEdBQUksY0FDSndCLE9BQVFBLEVBQ1JkLE1BQU8seUJBQTJCVyxFQUFNWCxNQUFRLElBQ2hEZCxXQUFZLHdDQUNaSyxTQUFVLG1FQUVkSCxFQUF1QkMsVUFBVStELEVBQVV6QyxLQUcvQ3hCLEVBQU9rRSxPQUFPLGdCQUFnQixTQUFVL0QsR0FDcEN3QixFQUFPd0MsV0FBYSxDQUFDaEUsR0FFakJBLElBeEJKSCxFQUFPZ0UsU0FBVSxFQUNqQjVDLEVBQVdtQixPQUFPWixHQUFRLFNBQVVhLEdBQ2hDeEMsRUFBT2dFLFNBQVUsRUFDakJoRSxFQUFPMEMsV0FBYUYsRUFBS0UiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLy9DYWxsIHRoaXMgdG8gcmVnaXN0ZXIgb3VyIG1vZHVsZSB0byBtYWluIGFwcGxpY2F0aW9uXHJcbnZhciBtb2R1bGVUZW1wbGF0ZU5hbWUgPSBcIkN1c3RvbWVyUmV2aWV3c1wiO1xyXG5cclxuaWYgKEFwcERlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBBcHBEZXBlbmRlbmNpZXMucHVzaChtb2R1bGVUZW1wbGF0ZU5hbWUpO1xyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZShtb2R1bGVUZW1wbGF0ZU5hbWUsIFtdKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnd29ya3NwYWNlLmN1c3RvbWVyUmV2aWV3cycsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvY3VzdG9tZXJSZXZpZXdzJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJyQoUGxhdGZvcm0pL1NjcmlwdHMvY29tbW9uL3RlbXBsYXRlcy9ob21lLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3Jldmlld3NMaXN0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJSZXZpZXdzLnJldmlld3NMaXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoQ3VzdG9tZXJSZXZpZXdzKS9TY3JpcHRzL2JsYWRlcy9yZXZpZXdzLWxpc3QudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXSlcclxuICAgIC5ydW4oWydwbGF0Zm9ybVdlYkFwcC5tYWluTWVudVNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAud2lkZ2V0U2VydmljZScsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uIChtYWluTWVudVNlcnZpY2UsIHdpZGdldFNlcnZpY2UsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICAvL1JlZ2lzdGVyIG1vZHVsZSBpbiBtYWluIG1lbnVcclxuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogJ2Jyb3dzZS9jdXN0b21lclJldmlld3MnLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWNvbW1lbnRzJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQ3VzdG9tZXIgUmV2aWV3cycsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLmN1c3RvbWVyUmV2aWV3cycpIH0sXHJcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY3VzdG9tZXJSZXZpZXc6cmVhZCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbWFpbk1lbnVTZXJ2aWNlLmFkZE1lbnVJdGVtKG1lbnVJdGVtKTtcclxuXHJcbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgcmV2aWV3cyB3aWRnZXQgaW5zaWRlIHByb2R1Y3QgYmxhZGVcclxuICAgICAgICAgICAgdmFyIGl0ZW1SZXZpZXdzV2lkZ2V0ID0ge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0N1c3RvbWVyUmV2aWV3cy5jdXN0b21lclJldmlld1dpZGdldENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoQ3VzdG9tZXJSZXZpZXdzKS9TY3JpcHRzL3dpZGdldHMvY3VzdG9tZXJSZXZpZXdXaWRnZXQudHBsLmh0bWwnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoaXRlbVJldmlld3NXaWRnZXQsICdpdGVtRGV0YWlsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXSk7Iiwi77u/YW5ndWxhci5tb2R1bGUoJ0N1c3RvbWVyUmV2aWV3cycpXHJcbiAgICAuY29udHJvbGxlcignQ3VzdG9tZXJSZXZpZXdzLnJldmlld3NMaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0N1c3RvbWVyUmV2aWV3cy5hcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICd1aUdyaWRDb25zdGFudHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCByZXZpZXdzQXBpLCBibGFkZVV0aWxzLCB1aUdyaWRDb25zdGFudHMsIHVpR3JpZEhlbHBlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkQ29uc3RhbnRzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xyXG4gICAgICAgICAgICB2YXIgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSA9IGJsYWRlVXRpbHMuYmxhZGVOYXZpZ2F0aW9uU2VydmljZTtcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLmdldFNlYXJjaENyaXRlcmlhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZXh0ZW5kKGZpbHRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaFBocmFzZTogZmlsdGVyLmtleXdvcmQgPyBmaWx0ZXIua2V5d29yZCA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBzb3J0OiB1aUdyaWRIZWxwZXIuZ2V0U29ydEV4cHJlc3Npb24oJHNjb3BlKSxcclxuICAgICAgICAgICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlOiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV2aWV3c0FwaS5zZWFyY2goYmxhZGUuZ2V0U2VhcmNoQ3JpdGVyaWEoKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBibGFkZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gZGF0YS5pZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3ZhciBuZXdCbGFkZSA9IHtcclxuICAgICAgICAgICAgICAgIC8vICAgIGlkOiAncmV2aWV3RGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBjdXJyZW50RW50aXR5SWQ6IGRhdGEuaWQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBjdXJyZW50RW50aXR5OiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgdGl0bGU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIC8vICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnN0b3JlTW9kdWxlLnN0b3JlRGV0YWlsQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAvLyAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlN0b3JlKS9TY3JpcHRzL2JsYWRlcy9zdG9yZS1kZXRhaWwudHBsLmh0bWwnXHJcbiAgICAgICAgICAgICAgICAvL307XHJcbiAgICAgICAgICAgICAgICAvL2JsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvL2Z1bmN0aW9uIG9wZW5CbGFkZU5ldygpIHtcclxuICAgICAgICAgICAgLy8gICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vICAgIHZhciBuZXdCbGFkZSA9IHtcclxuICAgICAgICAgICAgLy8gICAgICAgIGlkOiAnc3RvcmVEZXRhaWxzJyxcclxuICAgICAgICAgICAgLy8gICAgICAgIGN1cnJlbnRFbnRpdHk6IHt9LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgdGl0bGU6ICdzdG9yZXMuYmxhZGVzLm5ldy1zdG9yZS13aXphcmQudGl0bGUnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgc3VidGl0bGU6ICdzdG9yZXMuYmxhZGVzLm5ldy1zdG9yZS13aXphcmQuc3VidGl0bGUnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUubmV3U3RvcmVXaXphcmRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgLy8gICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU3RvcmUpL1NjcmlwdHMvd2l6YXJkcy9uZXdTdG9yZS9uZXctc3RvcmUtd2l6YXJkLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICAvLyAgICB9O1xyXG4gICAgICAgICAgICAvLyAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhLWNvbW1lbnRzJztcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIiwgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgICAgIC8vICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuYWRkXCIsIGljb246ICdmYSBmYS1wbHVzJyxcclxuICAgICAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IG9wZW5CbGFkZU5ldyxcclxuICAgICAgICAgICAgICAgIC8vICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyAgICBwZXJtaXNzaW9uOiAnc3RvcmU6Y3JlYXRlJ1xyXG4gICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAvLyBzaW1wbGUgYW5kIGFkdmFuY2VkIGZpbHRlcmluZ1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IGJsYWRlLmZpbHRlciB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gdWktZ3JpZFxyXG4gICAgICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsIGZ1bmN0aW9uIChncmlkQXBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlHcmlkSGVscGVyLmJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCgkc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZS4kcGFyZW50KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdDdXN0b21lclJldmlld3MnKVxyXG4gICAgLmZhY3RvcnkoJ0N1c3RvbWVyUmV2aWV3cy5hcGknLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcclxuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvY3VzdG9tZXJSZXZpZXdzJywge30sIHtcclxuICAgICAgICAgICAgc2VhcmNoOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvY3VzdG9tZXJSZXZpZXdzL3NlYXJjaCcgfSxcclxuICAgICAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvY3VzdG9tZXJSZXZpZXdzL3VwZGF0ZScgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiB7IG1ldGhvZDogJ0RFTEVURScsIHVybDogJ2FwaS9jdXN0b21lclJldmlld3MvZGVsZXRlJyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSk7Iiwi77u/YW5ndWxhci5tb2R1bGUoJ0N1c3RvbWVyUmV2aWV3cycpXHJcbiAgICAuY29udHJvbGxlcignQ3VzdG9tZXJSZXZpZXdzLmN1c3RvbWVyUmV2aWV3V2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0N1c3RvbWVyUmV2aWV3cy5hcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIHJldmlld3NBcGksIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgdmFyIGZpbHRlciA9IHsgdGFrZTogMCB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldmlld3NBcGkuc2VhcmNoKGZpbHRlciwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudCA9IGRhdGEudG90YWxDb3VudDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmxvYWRpbmcgfHwgISRzY29wZS50b3RhbENvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwicmV2aWV3c0xpc3RcIixcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdDdXN0b21lciByZXZpZXdzIGZvciBcIicgKyBibGFkZS50aXRsZSArICdcIicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJSZXZpZXdzLnJldmlld3NMaXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChDdXN0b21lclJldmlld3MpL1NjcmlwdHMvYmxhZGVzL3Jldmlld3MtbGlzdC50cGwuaHRtbCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKFwiYmxhZGUuaXRlbUlkXCIsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBmaWx0ZXIucHJvZHVjdElkcyA9IFtpZF07XHJcblxyXG4gICAgICAgICAgICBpZiAoaWQpIHJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgIH1dKTsiXSwic291cmNlUm9vdCI6IiJ9